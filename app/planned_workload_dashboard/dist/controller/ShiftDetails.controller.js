sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel"],function(t,e){"use strict";return t.extend("plannedworkloaddashboard.controller.ShiftDetails",{onInit(){this._oRouter=this.getOwnerComponent().getRouter();this._oRouter.getRoute("shiftDetails").attachPatternMatched(this._onRouteMatched,this);this.getView().setModel(new e({reportTypeLabel:"",reportType:"",showBothPanels:false,showInboundOnly:false,showOutboundOnly:false,shifts:[],operationalMetrics:[],hasOperationalData:false,inboundShifts:[],outboundShifts:[],inboundOperationalMetrics:[],outboundOperationalMetrics:[],hasInboundOperationalData:false,hasOutboundOperationalData:false,hasInboundData:true,hasOutboundData:true,showLaborNeedsPlan:false}),"viewModel")},_onRouteMatched(){const t=this.getOwnerComponent().getModel("navigation").getProperty("/navigationData")||{};this._updateViewData(t)},_updateViewData(t){const e=this.getView().getModel("viewModel");e.setProperty("/waveDateTime",t.waveDateTime||"");e.setProperty("/pickCompleteDateTime",t.pickCompleteDateTime||"");e.setProperty("/reportTypeLabel",t.reportTypeLabel);e.setProperty("/reportType",t.reportType);e.setProperty("/showBothPanels",t.reportType==="BOTH");e.setProperty("/showInboundOnly",t.reportType==="IN");e.setProperty("/showOutboundOnly",t.reportType==="OUT");const o=t.selectedQueues||[];let r=t.inboundData||[];let n=t.outboundData||[];if(o.length>0){r=this._filterByQueues(r,o);n=this._filterByQueues(n,o)}const s=r.length>0;const a=n.length>0;e.setProperty("/hasInboundData",s);e.setProperty("/hasOutboundData",a);if(t.reportType==="BOTH"){console.log("outbound",n);console.log("inbound",r);e.setProperty("/inboundShifts",this._groupByShift(r));e.setProperty("/outboundShifts",this._groupByShift(n));return}e.setProperty("/inboundShifts",this._groupByShift(r));e.setProperty("/outboundShifts",this._groupByShift(n))},_filterByQueues(t,e){if(!e||e.length===0){return t}return t.filter(t=>{const o=t.Queue||t.QueueDescription||"";return e.includes(o)})},_groupByShift(t){const e={};t.forEach(t=>{const o=t.Shift||"UNASSIGNED";if(!e[o]){e[o]={name:o,queues:[]}}e[o].queues.push(t)});Object.values(e).forEach(t=>{t.queues.sort((t,e)=>{const o=parseInt(t.SequenceNumber,10)||0;const r=parseInt(e.SequenceNumber,10)||0;return o-r})});console.log("map",Object.values(e));return Object.values(e)},formatTarget:function(t){if(t===null||t===undefined||t===""){return"0"}const e=String(t).trim();if(/^\d{4}-\d{2}-\d{2}$/.test(e)){return e}if(/^\d{2}:\d{2}:\d{2}$/.test(e)){return e}if(/^-?\d+\.\d+$/.test(e)){return Math.trunc(Number(e)).toString()}if(/^-?\d+$/.test(e)){return e}return e},formatOptionalMetric:function(t,e){const o=parseInt(e,10);const r=t===null||t===undefined?"":String(t).trim();if(o&&o<=4){if(r===""||r==="0"){return""}}return this.formatTarget(t)},onNavBack(){this._oRouter.navTo("RouteMain")}})});
//# sourceMappingURL=ShiftDetails.controller.js.map