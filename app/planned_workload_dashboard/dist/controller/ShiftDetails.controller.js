sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel"],function(e,t){"use strict";return e.extend("plannedworkloaddashboard.controller.ShiftDetails",{onInit(){this._oRouter=this.getOwnerComponent().getRouter();this._oRouter.getRoute("shiftDetails").attachPatternMatched(this._onRouteMatched,this);this.getView().setModel(new t({reportTypeLabel:"",reportType:"",showBothPanels:false,showInboundOnly:false,showOutboundOnly:false,shifts:[],operationalMetrics:[],hasOperationalData:false,inboundShifts:[],outboundShifts:[],inboundOperationalMetrics:[],outboundOperationalMetrics:[],hasInboundOperationalData:false,hasOutboundOperationalData:false,hasInboundData:true,hasOutboundData:true,showLaborNeedsPlan:false}),"viewModel")},_onRouteMatched(){const e=this.getOwnerComponent().getModel("navigation").getProperty("/navigationData")||{};this._updateViewData(e)},_updateViewData(e){const t=this.getView().getModel("viewModel");t.setProperty("/waveDateTime",e.waveDateTime||"");t.setProperty("/pickCompleteDateTime",e.pickCompleteDateTime||"");t.setProperty("/reportTypeLabel",e.reportTypeLabel);t.setProperty("/reportType",e.reportType);t.setProperty("/showBothPanels",e.reportType==="BOTH");t.setProperty("/showInboundOnly",e.reportType==="IN");t.setProperty("/showOutboundOnly",e.reportType==="OUT");const o=e.selectedQueues||[];let r=e.inboundData||[];let n=e.outboundData||[];if(o.length>0){r=this._filterByQueues(r,o);n=this._filterByQueues(n,o)}const s=r.length>0;const u=n.length>0;t.setProperty("/hasInboundData",s);t.setProperty("/hasOutboundData",u);if(e.reportType==="BOTH"){console.log("outbound",n);console.log("inbound",r);t.setProperty("/inboundShifts",this._groupByShift(r));t.setProperty("/outboundShifts",this._groupByShift(n));return}t.setProperty("/inboundShifts",this._groupByShift(r));t.setProperty("/outboundShifts",this._groupByShift(n))},_filterByQueues(e,t){if(!t||t.length===0){return e}return e.filter(e=>{const o=e.Queue||e.QueueDescription||"";return t.includes(o)})},_groupByShift(e){const t={};e.forEach(e=>{const o=e.Shift||"UNASSIGNED";if(!t[o]){t[o]={name:o,queues:[]}}t[o].queues.push(e)});Object.values(t).forEach(e=>{e.queues.sort((e,t)=>{const o=parseInt(e.SequenceNumber,10)||0;const r=parseInt(t.SequenceNumber,10)||0;return o-r})});return Object.values(t)},formatTarget:function(e){if(e===null||e===undefined||e===""){return""}const t=String(e).trim();if(/^\d{4}-\d{2}-\d{2}$/.test(t)){return t}if(/^\d{2}:\d{2}:\d{2}$/.test(t)){return t}if(/^-?\d+\.\d+$/.test(t)){return Math.trunc(Number(t)).toString()}if(/^-?\d+$/.test(t)){return t}return t},onNavBack(){this._oRouter.navTo("RouteMain")}})});
//# sourceMappingURL=ShiftDetails.controller.js.map